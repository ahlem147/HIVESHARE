<div class="row">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0 font-size-18">APERÇU DU PROJET</h4>
        </div>
    </div>
</div>
<!-- end page title -->

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="d-flex">
                    <div class="flex-shrink-0 me-4">
                        <img [src]="'http://127.0.0.1:3000/files/' + projects.client.image " alt=""
                            class="avatar-sm rounded-circle">
                    </div>

                    <div class="flex-grow-1 overflow-hidden">
                        <h5 class="text-truncate font-size-15"> {{projects.name}}
                        </h5>
                    </div>
                </div>

                <h5 class="font-size-15 mt-4"> Description :</h5>

                <p class="text-muted"> {{projects.description}} </p>


                <div class="row task-dates">
                    <div class="col-sm-4 col-6">
                        <div class="mt-4">
                            <h5 class="font-size-14"><i class="bx bx-money me-1 text-primary"></i>
                                Budget </h5>
                            <p class="text-muted mb-0"> {{projects.budget}} </p>
                        </div>
                    </div>
                    <div class="col-sm-4 col-6">
                        <div class="mt-4">
                            <h5 class="font-size-14"><i class="bx bx-calendar me-1 text-primary"></i>  Date de début</h5>
                            <p class="text-muted mb-0"> {{projects.startDate}} </p>
                        </div>
                    </div>

                    <div class="col-sm-4 col-6">
                        <div class="mt-4">
                            <h5 class="font-size-14"><i class="bx bx-calendar-check me-1 text-primary"></i> Date de fin
                            </h5>
                            <p class="text-muted mb-0"> {{projects.endDate}} </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end col -->

    <div class="col-lg-4">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title mb-4">Memberes de l'équipe</h4>

                @for (user of projects.team; track user._id) {
                <div class="table-responsive">
                    <table class="table align-middle table-nowrap">
                        <tbody>


                            <tr>
                                <td style="width: 50px;">
                                    <img [src]="'http://127.0.0.1:3000/files/' + user.image "
                                        class="rounded-circle avatar-xs" alt="">
                                </td>
                                <td>
                                    <h5 class="font-size-14 m-0"><a href="javascript: void(0);" class="text-dark">
                                            {{user.fullname}} </a></h5>
                                </td>
                                <td>
                                    <div>
                                        @for (tag of user.tags; track tag._id) {
                                        <a href="javascript: void(0);"
                                            class="badge bg-primary bg-soft text-primary font-size-11 me-1">{{tag}}</a>

                                        }
                                    </div>
                                </td>
                            </tr>



                        </tbody>
                    </table>
                </div>
                }
            </div>
        </div>
    </div>
    <!-- end col -->

    <div class="col-lg-4">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title mb-4">Pièces jointes</h4>
                <div class="table-responsive">
                    <table class="table table-nowrap align-middle table-hover mb-0">
                        <tbody>
                            @for (file of projects.files; track file._id) {
                                <tr>
                                    <tr>
                                        <td style="width: 45px;">
                                            <div class="avatar-sm">
                                                <span
                                                    class="avatar-title rounded-circle bg-primary bg-soft text-primary font-size-24">
                                                    <i class="bx bxs-file-doc"></i>
                                                </span>
                                            </div>
                                        </td>
                                        <td>
                                            <h5 class="font-size-14 mb-1"><a href="javascript: void(0);" class="text-dark">
                                                    {{file}} </a></h5>
                                            <small>Size : 3.25 MB</small>
                                        </td>
                                        <td>
                                            <div class="text-center">
                                                <a [href]="'http://127.0.0.1:3000/files/'+file"   target="_blank" class="text-dark"><i class="bx bx-download h3 m-0"></i></a>
                                            </div>
                                        </td>
                                    </tr>
                            }

                        

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card">
            <div class="card-body">
                <div class="text-center">

                    <img [src]="'http://127.0.0.1:3000/files/' + projects.client.image" alt="" class="img-thumbnail w-25 rounded-circle">

                    <h5 class="font-size-15 text-truncate mt-3"> {{projects.client.fullname}}  </h5>

                </div>
                <div class="table-responsive">
                    <table class="table table-nowrap mb-0">
                        <tbody>

                            <tr>
                                <th scope="row">Tel :</th>
                                <td>{{projects.client.tel}}  </td>
                            </tr>
                            <tr>
                                <th scope="row">E-mail :</th>
                                <td>{{projects.client.email}}  </td>
                            </tr>
                            <tr>
                                <th scope="row">Adresse :</th>
                                <td>{{projects.client.address}}  </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
  <app-todo [project]="id"></app-todo>
</div>
